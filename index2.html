<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>arrow move</title>
    <script src="test.js"></script>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<table>
    <tbody id="tbody1">
    <tr>
        <td><input type="text" id="row0_col0" autofocus></td>
        <td><input type="text" id="row0_col1"></td>
        <td><input type="text" id="row0_col2"></td>
        <td><input type="text" id="row0_col3"></td>
        <td><input type="text" id="row0_col4"></td>
    </tr>
    <tr>
        <td><input type="text" id="row1_col0"></td>
        <td><input type="text" id="row1_col1"></td>
        <td><input type="text" id="row1_col2"></td>
        <td><input type="text" id="row1_col3"></td>
        <td><input type="text" id="row1_col4"></td>
    </tr>
    <tr>
        <td><input type="text" id="row2_col0"></td>
        <td><input type="text" id="row2_col1"></td>
        <td colspan="1"></td>
        <td colspan="1"></td>
        <td><input type="text" id="row2_col4"></td>
    </tr>
    <tr>
        <td><input type="text" id="row3_col0"></td>
        <td><input type="text" id="row3_col1"></td>
        <td><input type="text" id="row3_col2"></td>
        <td colspan="1"></td>
        <td><input type="text" id="row3_col4"></td>
    </tr>
    <tr>
        <td><input type="text" id="row4_col0"></td>
        <td><input type="text" id="row4_col1"></td>
        <td><input type="text" id="row4_col2"></td>
        <td><input type="text" id="row4_col3"></td>
        <td colspan="1"></td>
    </tr>
    <tr>
        <td><input type="text" id="row5_col0"></td>
        <td><input type="text" id="row5_col1"></td>
        <td><input type="text" id="row5_col2"></td>
        <td><input type="text" id="row5_col3"></td>
        <td><input type="text" id="row5_col4"></td>
    </tr>
    <tr>
        <td><input type="text" id="row6_col0"></td>
        <td><input type="text" id="row6_col1"></td>
        <td colspan="1"></td>
        <td><input type="text" id="row6_col3"></td>
        <td><input type="text" id="row6_col4"></td>
    </tr>
    </tbody>
</table>
<script>


    //[row,col] - 상하, 좌우
    const input_key = {
        37:[0,-1],
        38:[-1,0],
        39:[0,1],
        40:[1,0]
    }

    $(document).keydown(function (e) {
        console.log(e.keyCode)  //37 left,38 up,39 right,40 down

        let move = input_key[e.keyCode];
        if(move == undefined){
            return false;
        }
        let target = e.target.id
        let rownum = Number(target.slice(3,target.indexOf('_')));
        let colnum = Number(target.slice(target.indexOf('l')+1,target.length));
        let id = [rownum,colnum];
        target = [rownum,colnum];
        let result = e.target.id;


        let rowlength = $('#tbody1 tr').length;
        let collength = $('#tbody1 tr').eq(0).find('td').length;
        // console.log("#"+target , id)

        while($(result).length === 0 || target.toString() ===  id.toString()) {

            target[0] += move[0];
            target[1] += move[1];
            if(target[0] === rowlength){
                target[1]++;
            }else if(target[0] < 0){
                target[1]--;
            }
            if(target[1] === collength){
                target[0]++;
            }else if(target[1] < 0){
                target[0]--;
            }
            target[0] = (target[0] + rowlength) % rowlength;
            target[1] = (target[1] + collength) % collength;

            result = '#row' + target[0] + '_col' + target[1];
        }

        $(result).focus();
    })







</script>

</body>
</html>